---
import Layout from '../layouts/Layout.astro';
import TableView from '../components/TableView.tsx';
import Footer from '../components/Footer.astro';
import { fetchInitiatives } from '../lib/initiatives';

const initiatives = await fetchInitiatives();
const baseUrl = import.meta.env.BASE_URL || '/';
---

<Layout
  title="Vista Tabellare - Iniziative Democratiche"
  description="Visualizza tutte le iniziative democratiche in formato tabellare"
>
  <main class="min-h-screen bg-gray-50">
    <TableView
      initiatives={initiatives}
      baseUrl={baseUrl}
      client:load
    />
  </main>

  <!-- Footer -->
  <Footer />
</Layout>

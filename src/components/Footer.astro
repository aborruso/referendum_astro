---
// Footer component riutilizzabile
import fs from 'fs';
import path from 'path';

// Leggi la data di aggiornamento dal file check_date.txt
let lastUpdateDate = '';
try {
  const checkDatePath = path.join(process.cwd(), 'data', 'check_date.txt');
  const dateString = fs.readFileSync(checkDatePath, 'utf-8').trim();
  // Converte da YYYY-MM-DD a DD/MM/YYYY
  const [year, month, day] = dateString.split('-');
  lastUpdateDate = `${day}/${month}/${year}`;
} catch (error) {
  // Fallback alla data corrente se il file non esiste
  lastUpdateDate = new Date().toLocaleDateString('it-IT');
}
---

<footer class="bg-white border-t border-gray-200 mt-16">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <div class="text-center text-gray-600">
      <p>
        Un'idea dell'associazione{' '}
        <a
          href="https://ondata.it/"
          target="_blank"
          rel="noopener noreferrer"
          class="text-blue-600 hover:text-blue-700"
        >
          onData
        </a>
      </p>

      <!-- Linea separatrice -->
      <hr class="w-96 mx-auto my-4 border-gray-300" />

      <p>
        Dati forniti dal{' '}
        <a
          href="https://firmereferendum.giustizia.it"
          target="_blank"
          rel="noopener noreferrer"
          class="text-blue-600 hover:text-blue-700"
        >
          Ministero della Giustizia
        </a>
      </p>
      <p class="mt-2 text-sm">
        Ultimo aggiornamento: {lastUpdateDate}
      </p>
    </div>
  </div>
</footer>
